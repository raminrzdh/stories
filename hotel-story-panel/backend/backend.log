2026/02/20 20:38:12 Database connected successfully
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /uploads/*filepath        --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] HEAD   /uploads/*filepath        --> github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (4 handlers)
[GIN-debug] POST   /api/auth/signup          --> hotel-story-panel/backend/internal/handlers.Signup (4 handlers)
[GIN-debug] POST   /api/auth/login           --> hotel-story-panel/backend/internal/handlers.Login (4 handlers)
[GIN-debug] GET    /api/public/stories/:city_slug --> hotel-story-panel/backend/internal/handlers.GetPublicStories (4 handlers)
[GIN-debug] POST   /api/public/stories/open/:id --> hotel-story-panel/backend/internal/handlers.IncrementSlideOpen (4 handlers)
[GIN-debug] GET    /api/admin/stats          --> hotel-story-panel/backend/internal/handlers.GetDashboardStats (5 handlers)
[GIN-debug] GET    /api/admin/story-groups   --> hotel-story-panel/backend/internal/handlers.GetGroups (5 handlers)
[GIN-debug] GET    /api/admin/story-groups/:id --> hotel-story-panel/backend/internal/handlers.GetGroup (5 handlers)
[GIN-debug] POST   /api/admin/story-groups   --> hotel-story-panel/backend/internal/handlers.CreateGroup (5 handlers)
[GIN-debug] PUT    /api/admin/story-groups/:id --> hotel-story-panel/backend/internal/handlers.UpdateGroup (5 handlers)
[GIN-debug] DELETE /api/admin/story-groups/:id --> hotel-story-panel/backend/internal/handlers.DeleteGroup (5 handlers)
[GIN-debug] POST   /api/admin/story-groups/:id/stories --> hotel-story-panel/backend/internal/handlers.AddSlide (5 handlers)
[GIN-debug] PATCH  /api/admin/story-groups/:id/status --> hotel-story-panel/backend/internal/handlers.ToggleGroupStatus (5 handlers)
[GIN-debug] DELETE /api/admin/stories/:id    --> hotel-story-panel/backend/internal/handlers.DeleteSlide (5 handlers)
[GIN-debug] PUT    /api/admin/stories/:id    --> hotel-story-panel/backend/internal/handlers.UpdateSlide (5 handlers)
[GIN-debug] POST   /api/admin/upload         --> hotel-story-panel/backend/internal/handlers.UploadImage (5 handlers)
2026/02/20 20:38:12 Server running on :8080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://github.com/gin-gonic/gin/blob/master/docs/doc.md#dont-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on :8080
[GIN] 2026/02/20 - 20:39:37 | 204 |      86.667µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:39:37 | 204 |   19.924708ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:39:37 | 200 |  141.422958ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:39:37 | 200 |     776.875µs |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:39:37 | 304 |     639.917µs |             ::1 | GET      "/uploads/1771606966052897000_Gemini_Generated_Image_vhatf0vhatf0vhat.png"
[GIN] 2026/02/20 - 20:44:04 | 404 |       1.396ms |             ::1 | GET      "/"
[GIN] 2026/02/20 - 20:51:28 | 204 |   11.072583ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:51:28 | 204 |   11.139417ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:51:28 | 200 |   530.97475ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:51:28 | 200 |    6.315917ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:51:28 | 304 |    8.273708ms |             ::1 | GET      "/uploads/1771606966052897000_Gemini_Generated_Image_vhatf0vhatf0vhat.png"
[GIN] 2026/02/20 - 20:51:28 | 304 |    8.040166ms |             ::1 | GET      "/uploads/1771597601983343000_receipt-1771152745899.png"
[GIN] 2026/02/20 - 20:55:12 | 204 |    7.260916ms |             ::1 | OPTIONS  "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 20:55:12 | 204 |    7.260584ms |             ::1 | OPTIONS  "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 20:55:15 | 200 |     3.028061s |             ::1 | GET      "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 20:55:15 | 200 |    6.726625ms |             ::1 | GET      "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 20:55:19 | 204 |      14.958µs |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 20:55:19 | 204 |       5.417µs |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 20:55:19 | 200 |   41.830333ms |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 20:55:19 | 200 |     845.625µs |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 20:55:22 | 204 |      12.792µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:55:22 | 204 |       4.334µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:55:22 | 200 |      12.337ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 20:55:22 | 200 |     476.666µs |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:02 | 204 |    9.346875ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:02 | 204 |    9.354083ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:02 | 200 |   94.473417ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:02 | 200 |     479.625µs |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:02 | 304 |    3.605334ms |             ::1 | GET      "/uploads/1771606966052897000_Gemini_Generated_Image_vhatf0vhatf0vhat.png"
[GIN] 2026/02/20 - 21:01:11 | 204 |      31.542µs |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 21:01:11 | 204 |       4.125µs |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 21:01:12 | 200 |   99.491833ms |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 21:01:12 | 200 |     886.084µs |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 21:01:16 | 204 |     979.417µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:16 | 204 |      62.875µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:16 | 200 |  156.425083ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:16 | 200 |     723.542µs |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:01:18 | 404 |      15.125µs |             ::1 | GET      "/"
[GIN] 2026/02/20 - 21:01:29 | 404 |      20.375µs |             ::1 | GET      "/"
[GIN] 2026/02/20 - 21:01:46 | 204 |      60.834µs |             ::1 | OPTIONS  "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:01:46 | 400 |    6.539042ms |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:01:48 | 400 |     211.792µs |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:01:49 | 400 |        97.5µs |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:01:49 | 400 |     125.791µs |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:01:50 | 400 |     122.167µs |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:02:02 | 204 |     127.291µs |             ::1 | OPTIONS  "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:02:02 | 400 |     202.167µs |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:07:13 | 204 |     770.625µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:07:13 | 204 |    7.232042ms |             ::1 | OPTIONS  "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 0 groups for city: تهران
[GIN] 2026/02/20 - 21:07:15 | 200 |   1.31242875s |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 0 groups for city: تهران
[GIN] 2026/02/20 - 21:07:15 | 200 |     589.542µs |             ::1 | GET      "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:07:18 | 204 |      14.667µs |             ::1 | OPTIONS  "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:07:18 | 200 |  166.232917ms |             ::1 | PATCH    "/api/admin/story-groups/17/status"
[GIN] 2026/02/20 - 21:07:18 | 204 |       3.041µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:07:18 | 200 |   41.769167ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:07:28 | 204 |     872.916µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:07:28 | 200 |   33.248291ms |             ::1 | GET      "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:07:28 | 304 |    6.243833ms |             ::1 | GET      "/uploads/1771606966052897000_Gemini_Generated_Image_vhatf0vhatf0vhat.png"
[GIN] 2026/02/20 - 21:07:35 | 200 |      70.375µs |             ::1 | POST     "/api/public/stories/open/26"
[GIN] 2026/02/20 - 21:07:35 | 200 |      32.792µs |             ::1 | POST     "/api/public/stories/open/26"
[GIN] 2026/02/20 - 21:07:35 | 304 |    2.110959ms |             ::1 | GET      "/uploads/1771606993933326000_story.jpg"
[GIN] 2026/02/20 - 21:07:38 | 200 |      52.167µs |             ::1 | POST     "/api/public/stories/open/27"
[GIN] 2026/02/20 - 21:07:38 | 304 |     181.166µs |             ::1 | GET      "/uploads/1771607005043907000_story.jpg"
[GIN] 2026/02/20 - 21:07:40 | 200 |      16.542µs |             ::1 | POST     "/api/public/stories/open/26"
[GIN] 2026/02/20 - 21:07:40 | 200 |       10.25µs |             ::1 | POST     "/api/public/stories/open/26"
[GIN] 2026/02/20 - 21:07:45 | 200 |      30.958µs |             ::1 | POST     "/api/public/stories/open/27"
[GIN] 2026/02/20 - 21:08:48 | 204 |    2.109916ms |             ::1 | OPTIONS  "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:08:48 | 204 |   27.358958ms |             ::1 | OPTIONS  "/api/public/stories/qazvin"
DEBUG: GetPublicStories for city: qazvin
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:08:50 | 200 |  1.581671667s |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: Found 0 groups for city: qazvin
[GIN] 2026/02/20 - 21:08:50 | 200 |  1.604280208s |             ::1 | GET      "/api/public/stories/qazvin"
[GIN] 2026/02/20 - 21:08:56 | 204 |     133.625µs |             ::1 | OPTIONS  "/api/public/stories/qazvin"
DEBUG: GetPublicStories for city: qazvin
DEBUG: Found 0 groups for city: qazvin
[GIN] 2026/02/20 - 21:08:56 | 200 |   40.373083ms |             ::1 | GET      "/api/public/stories/qazvin"
[GIN] 2026/02/20 - 21:08:57 | 204 |       4.167µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:08:57 | 200 |      800.25µs |             ::1 | GET      "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:19:51 | 204 |    17.01275ms |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 21:19:51 | 204 |    2.011083ms |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 21:19:51 | 200 |  212.722708ms |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 21:19:51 | 200 |    3.015541ms |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 21:19:56 | 204 |    3.946167ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:19:56 | 204 |       3.375µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:19:56 | 200 |  140.813833ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:19:56 | 200 |   31.356917ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:20:09 | 204 |       29.25µs |             ::1 | OPTIONS  "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 21:20:09 | 204 |       7.333µs |             ::1 | OPTIONS  "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 21:20:10 | 200 |     197.352ms |             ::1 | GET      "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 21:20:10 | 200 |      3.5035ms |             ::1 | GET      "/api/admin/story-groups/17"
[GIN] 2026/02/20 - 21:20:29 | 204 |      31.666µs |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 21:20:29 | 204 |       7.416µs |             ::1 | OPTIONS  "/api/admin/stats"
[GIN] 2026/02/20 - 21:20:29 | 200 |      14.121ms |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 21:20:29 | 200 |    1.462916ms |             ::1 | GET      "/api/admin/stats"
[GIN] 2026/02/20 - 21:44:01 | 204 |    3.375917ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:01 | 204 |    2.917625ms |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:02 | 200 |  487.539833ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:02 | 200 |    3.884584ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:02 | 304 |     4.23225ms |             ::1 | GET      "/uploads/1771606966052897000_Gemini_Generated_Image_vhatf0vhatf0vhat.png"
[GIN] 2026/02/20 - 21:44:02 | 304 |    6.061708ms |             ::1 | GET      "/uploads/1771597601983343000_receipt-1771152745899.png"
[GIN] 2026/02/20 - 21:44:07 | 404 |      23.625µs |             ::1 | GET      "/"
[GIN] 2026/02/20 - 21:44:21 | 204 |      98.167µs |             ::1 | OPTIONS  "/api/admin/upload"
DEBUG: UploadImage handler hit
[GIN] 2026/02/20 - 21:44:21 | 200 |   28.028625ms |             ::1 | POST     "/api/admin/upload"
[GIN] 2026/02/20 - 21:44:21 | 200 |   44.235458ms |             ::1 | GET      "/uploads/1771611261290362000_20260210_183110.png"
[GIN] 2026/02/20 - 21:44:37 | 204 |      99.042µs |             ::1 | OPTIONS  "/api/admin/story-groups/15"
[GIN] 2026/02/20 - 21:44:37 | 200 |   35.279625ms |             ::1 | PUT      "/api/admin/story-groups/15"
[GIN] 2026/02/20 - 21:44:37 | 204 |       6.583µs |             ::1 | OPTIONS  "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:37 | 200 |   12.737166ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:40 | 204 |      43.208µs |             ::1 | OPTIONS  "/api/admin/story-groups/15/status"
[GIN] 2026/02/20 - 21:44:40 | 200 |      4.5395ms |             ::1 | PATCH    "/api/admin/story-groups/15/status"
[GIN] 2026/02/20 - 21:44:40 | 200 |    1.238083ms |             ::1 | GET      "/api/admin/story-groups"
[GIN] 2026/02/20 - 21:44:53 | 204 |     102.167µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:44:53 | 204 |       2.667µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:44:54 | 200 |  912.165083ms |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:44:54 | 200 |   38.186917ms |             ::1 | GET      "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:45:02 | 200 |          69µs |             ::1 | POST     "/api/public/stories/open/26"
[GIN] 2026/02/20 - 21:45:02 | 200 |        6.75µs |             ::1 | POST     "/api/public/stories/open/26"
[GIN] 2026/02/20 - 21:45:02 | 304 |    1.375542ms |             ::1 | GET      "/uploads/1771606993933326000_story.jpg"
[GIN] 2026/02/20 - 21:45:04 | 204 |       13.75µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:45:04 | 204 |       1.458µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:45:04 | 200 |    3.550917ms |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:45:04 | 200 |    1.580667ms |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:45:09 | 200 |   15.864584ms |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:45:09 | 200 |    1.551458ms |             ::1 | GET      "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:45:22 | 204 |      19.375µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
[GIN] 2026/02/20 - 21:45:22 | 204 |       6.209µs |             ::1 | OPTIONS  "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:45:22 | 200 |   14.846125ms |             ::1 | GET      "/api/public/stories/تهران"
DEBUG: GetPublicStories for city: تهران
DEBUG: Found 1 groups for city: تهران
DEBUG: Group ID 17 has 2 slides
[GIN] 2026/02/20 - 21:45:22 | 200 |    2.196542ms |             ::1 | GET      "/api/public/stories/تهران"
